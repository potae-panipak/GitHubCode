#include<stdio.h>
#include<windows.h>
#include<time.h>
#include<conio.h>
#include<string.h>
#define textcolor(txt,back) SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),back*16+txt)
COORD coord= {0,0};
int box[32][17];
int x,y,s=0,k,l,o,p,q,r,k2,l2,o2,p2,q2,r2,x2,y2;
char name[1000];
void gotoxy(int x,int y)
{
    coord.X=y;
    coord.Y=x;
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE),coord);
}
void losescr()
{
    textcolor(12,0);
    printf("  **********           ****         *****           *****    ****************\n");
    printf("**************       ********       ******         ******    ****************\n");
    printf("****               ****    ****     *******       *******    ****\n");
    printf("****              ****      ****    *** ****     *** ****    ****\n");
    printf("****    ******    ****      ****    **** ****   **** ****    ****\n");
    printf("****    ******    ****      ****    ****  **** ****  ****    ****************\n");
    printf("****      ****    **************    ****    *****    ****    ****************\n");
    printf("****      ****    **************    ****             ****    ****\n");
    printf("****      ****    ****      ****    ****             ****    ****\n");
    printf("****      ****    ****      ****    ****             ****    ****\n");
    printf("**************    ****      ****    ****             ****    ****************\n");
    printf("  **********      ****      ****    ****             ****    ****************\n");
    printf("\n");
    printf("\n");
    printf("\n");
    printf("    **********      ****      ****    ****************     ****************\n");
    printf("  **************    ****      ****    ****************     *****************\n");
    printf("  ****      ****    ****      ****    ****                 ****        ******\n");
    printf("  ****      ****    ****      ****    ****                 ****        ******\n");
    printf("  ****      ****    ****      ****    ****                 *****************\n");
    printf("  ****      ****    ****      ****    ****************     ****************\n");
    printf("  ****      ****    ****      ****    ****************     *************\n");
    printf("  ****      ****    ****      ****    ****                 ****    *****\n");
    printf("  ****      ****     ****    ****     ****                 ****     *****\n");
    printf("  ****      ****      ****  ****      ****                 ****      *****\n");
    printf("  **************       ********       ****************     ****       *****\n");
    printf("    **********           ****         ****************     ****        *****\n");
    Sleep(2000);
    printf("Press anykey to go to main menu\n");
    getch();
    fflush(stdin);
    system("cls");
    Menu();
}
void checklose(int x, int y)
{
    if(x==k&&y==l)
    {
        system("COLOR 07");
        system("cls");
        gotoxy(0,0);
        losescr();
    }
    if(x==o&&y==p)
    {
        system("COLOR 07");
        system("cls");
        gotoxy(0,0);
        losescr();
    }
    if(x==q&&y==r)
    {
        system("COLOR 07");
        system("cls");
        gotoxy(0,0);
        losescr();
    }
    if(x==k2&&y==l2)
    {
        system("COLOR 07");
        system("cls");
        gotoxy(0,0);
        losescr();
    }
    if(x==o2&&y==p2)
    {
        system("COLOR 07");
        system("cls");
        gotoxy(0,0);
        losescr();
    }
    if(x==q2&&y==r2)
    {
        system("COLOR 07");
        system("cls");
        gotoxy(0,0);
        losescr();
    }

}
void Enemy1()
{
    int a;
    a = rand()%4;
    if(a==0)
    {
        if(box[k+1][l] == 0 )
        {
            l2=l;
            k2 = k;
            k++;
            gotoxy(k,l);
            printf("*");
            gotoxy(k-1,l);
            printf(" ");
            gotoxy(k,l);
        }
    }
    if(a==1)
    {
        if(box[k-1][l] == 0 )
        {
            l2=l;
            k2 = k;
            k--;
            gotoxy(k,l);
            printf("*");
            gotoxy(k+1,l);
            printf(" ");
            gotoxy(k,l);
        }
    }
    if(a==2)
    {
        if(box[k][l+1] == 0 )
        {
            l2 = l;
            k2=k;
            l++;
            gotoxy(k,l);
            printf("*");
            gotoxy(k,l-1);
            printf(" ");
            gotoxy(k,l);
        }
    }

    if(a==3)
    {
        if(box[k][l-1] == 0 )
        {
            k2=k;
            l2 = l;
            l--;
            gotoxy(k,l);
            printf("*");
            gotoxy(k,l+1);
            printf(" ");
            gotoxy(k,l);
        }
    }
}
void Enemy2()
{
    int a;
    a = rand()%4;
    if(a==0)
    {
        if(box[o+1][p] == 0 )
        {
            p2=p;
            o2=o;
            o++;
            gotoxy(o,p);
            printf("*");
            gotoxy(o-1,p);
            printf(" ");
            gotoxy(o,p);
        }
    }
    if(a==1)
    {
        if(box[o-1][p] == 0 )
        {
            p2=p;
            o2=o;
            o--;
            gotoxy(o,p);
            printf("*");
            gotoxy(o+1,p);
            printf(" ");
            gotoxy(o,p);
        }
    }
    if(a==2)
    {
        if(box[o][p+1] == 0 )
        {
            k2=k;
            p2 = p;
            p++;
            gotoxy(o,p);
            printf("*");
            gotoxy(o,p-1);
            printf(" ");
            gotoxy(o,p);
        }
    }

    if(a==3)
    {
        if(box[o][p-1] == 0 )
        {
            k2=k;
            p2=p;
            p--;
            gotoxy(o,p);
            printf("*");
            gotoxy(o,p+1);
            printf(" ");
            gotoxy(o,p);
        }
    }
}
void Enemy3()
{
    int a;
    a = rand()%4;
    if(a==0)
    {
        if(box[q+1][r] == 0 )
        {
            r2=r;
            q2=q;
            q++;
            gotoxy(q,r);
            printf("*");
            gotoxy(q-1,r);
            printf(" ");
            gotoxy(q,r);
        }
    }
    if(a==1)
    {
        if(box[q-1][r] == 0 )
        {
            r2=r;
            q2=q;
            q--;
            gotoxy(q,r);
            printf("*");
            gotoxy(q+1,r);
            printf(" ");
            gotoxy(q,r);
        }
    }
    if(a==2)
    {
        if(box[q][r+1] == 0 )
        {
            q2=q;
            r2=r;
            r++;
            gotoxy(q,r);
            printf("*");
            gotoxy(q,r-1);
            printf(" ");
            gotoxy(q,r);
        }
    }

    if(a==3)
    {
        if(box[q][r-1] == 0 )
        {
            q2=q;
            r2=r;
            r--;
            gotoxy(q,r);
            printf("*");
            gotoxy(q,r+1);
            printf(" ");
            gotoxy(q,r);
        }
    }
}
void Winscr()
{
    FILE *u,*h;
    u = fopen("User.txt","a");
    h = fopen("Score.txt","a");
    system("COLOR 07");
    textcolor(10,0);
    printf("*******               *******           *************            *******          *******\n");
    printf(" *******             *******          *****************          *******          *******\n");
    printf("  *******           *******          ********************        *******          *******\n");
    printf("   *******         *******           ********************        *******          *******\n");
    printf("    *******       *******            ********************        *******          *******\n");
    printf("     *******     *******             *********  *********        *******          *******\n");
    printf("      *******   *******              *******      *******        *******          *******\n");
    printf("       ******* *******               ******        ******        *******          *******\n");
    printf("          *********                  *****          *****        *******          *******\n");
    printf("           *******                   *****          *****        *******          *******\n");
    printf("            *****                    *****          *****        *******          *******\n");
    printf("            *****                    ******        ******        *******          *******\n");
    printf("            *****                    *******      *******        *******          *******\n");
    printf("            *****                    *********  *********        *******          *******\n");
    printf("            *****                    ********************        ************************\n");
    printf("            *****                    ********************         **********************\n");
    printf("           *******                   ********************          ********************\n");
    printf("          *********                     **************              ******************\n\n");


    printf("       ********        ************         ********        **************            ***************************\n");
    printf("         ********        ********         ********            **********            *******************************\n");
    printf("           ********      ********       ********               ********            ***************   ***************\n");
    printf("           ********       ******        ********               ********            *******                   *******\n");
    printf("            ********      ******       ********                ********            ********                 ********\n");
    printf("            ********      ******       ********                ********            ********                 ********\n");
    printf("             ********     ******      ********                 ********            ********                 ********\n");
    printf("             ********     ******      ********                 ********            ********                 ********\n");
    printf("              ********    ******     ********                  ********            ********                 ********\n");
    printf("              ********    ******     ********                  ********            ********                 ********\n");
    printf("               ********   ******    ********                   ********            ********                 ********\n");
    printf("               ********   ******    ********                   ********            ********                 ********\n");
    printf("                ********  ******   ********                    ********            ********                 ********\n");
    printf("               *****************************                  **********            *******                 *******\n");
    printf("                   *********************                    **************           ******                 ******\n");
    textcolor(15,0);
    printf("You have walked %d step!!!\n",s);
    printf("Press anykey to go to main menu");
    fprintf(u,"%s\n",name);
    fprintf(h,"%d\n",s);
    fclose(u);
    fclose(h);
    getch();
    system("cls");
    Menu();
}
void stage(int z)
{
    int i,j;
    if(z==0)
    {
        int stg[32][17]= {2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                          2,0,0,0,1,1,0,1,1,0,1,1,0,0,0,0,2,
                          2,0,1,0,0,1,0,0,0,0,1,0,1,1,0,1,2,
                          2,1,1,0,1,1,1,1,0,1,1,0,0,0,0,1,2,
                          2,0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,2,
                          2,0,1,1,1,0,1,1,0,1,1,1,0,0,0,0,2,
                          2,0,1,0,1,0,0,0,0,1,0,0,0,1,0,1,2,
                          2,0,0,0,0,1,1,1,0,1,1,0,1,1,0,1,2,
                          2,1,1,1,1,0,0,0,0,0,0,0,1,0,0,0,2,
                          2,0,0,1,0,1,0,1,0,1,1,0,0,1,1,0,2,
                          2,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,2,
                          2,0,1,1,0,1,1,0,0,0,0,1,1,0,1,0,2,
                          2,0,0,0,0,1,1,1,0,1,1,0,0,0,0,0,2,
                          2,1,1,1,0,1,0,1,1,1,0,0,1,0,1,1,2,
                          2,0,1,0,0,0,0,1,0,0,0,1,0,0,1,1,2,
                          2,0,0,0,1,1,0,1,0,1,0,0,0,0,0,1,2,
                          2,0,1,1,0,0,0,1,0,1,1,1,0,1,1,1,2,
                          2,1,0,1,1,1,1,0,0,0,1,0,0,1,0,0,2,
                          2,0,0,1,1,0,0,0,1,1,1,1,0,0,0,1,2,
                          2,1,0,0,1,0,1,0,0,1,0,1,1,1,1,1,2,
                          2,0,0,1,0,0,1,1,0,0,0,0,1,0,0,0,2,
                          2,1,1,1,1,0,0,0,1,1,0,1,0,1,0,1,2,
                          2,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,2,
                          2,1,0,1,0,0,0,0,0,0,1,1,1,0,1,0,2,
                          2,0,0,0,1,1,0,1,1,0,0,0,1,0,1,1,2,
                          2,0,1,1,0,0,0,1,0,0,1,1,1,0,0,0,2,
                          2,0,1,0,0,0,1,1,0,1,1,0,0,1,1,0,2,
                          2,1,0,0,0,1,0,0,0,0,1,0,1,1,3,0,2,
                          2,0,1,1,0,0,1,1,0,1,1,0,1,0,1,1,2,
                          2,0,1,0,1,0,1,0,0,0,1,0,0,0,0,0,2,
                          2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,2,
                          2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                         };
        for(i=0; i<32; i++)
        {
            for(j=0; j<17; j++)
            {
                box[i][j] = stg[i][j];
            }
        }
        x = 1;
        y = 15;
        s=0;
        k=8;
        l=8;
        o=18;
        p=6;
        q=23;
        r=7;
    }
    if(z==1)
    {
        int stg[32][17]= {2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                          2,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,2,
                          2,0,1,1,1,0,1,1,0,0,1,0,0,0,0,0,2,
                          2,0,1,1,1,0,0,0,0,0,0,0,0,1,1,0,2,
                          2,0,1,0,1,1,0,1,0,1,0,0,0,1,0,0,2,
                          2,0,1,0,1,0,0,0,1,1,0,1,1,1,0,1,2,
                          2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
                          2,1,0,0,1,1,1,1,1,1,0,0,0,0,1,1,2,
                          2,1,0,0,0,0,0,0,1,1,1,1,1,0,0,1,2,
                          2,1,1,1,0,0,0,0,1,0,0,0,0,1,0,1,2,
                          2,0,0,0,0,0,1,0,0,0,0,0,0,1,0,1,2,
                          2,0,0,0,1,1,0,0,1,1,1,0,0,0,0,1,2,
                          2,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,2,
                          2,0,1,0,0,0,0,0,1,0,1,1,0,0,0,0,2,
                          2,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,2,
                          2,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,2,
                          2,1,0,0,1,0,0,0,0,1,1,1,1,1,0,0,2,
                          2,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,
                          2,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,2,
                          2,1,0,0,1,0,0,0,1,1,0,1,0,0,1,0,2,
                          2,1,0,1,0,1,0,1,1,0,0,1,1,0,1,0,2,
                          2,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,2,
                          2,1,0,1,0,0,1,0,0,1,1,1,0,0,1,0,2,
                          2,1,1,1,0,0,1,0,0,1,0,0,0,1,0,0,2,
                          2,0,0,0,1,1,1,0,0,1,0,0,1,0,1,0,2,
                          2,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,2,
                          2,0,1,0,0,1,0,0,1,1,1,0,0,1,0,0,2,
                          2,1,0,1,1,1,0,0,0,0,1,0,0,1,0,1,2,
                          2,0,0,0,0,0,1,1,1,0,1,1,1,1,0,0,2,
                          2,0,1,1,0,1,0,0,0,0,1,0,0,0,0,1,2,
                          2,1,0,0,0,1,3,1,1,1,1,0,0,0,0,1,2,
                          2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
                         };
        for(i=0; i<32; i++)
        {
            for(j=0; j<17; j++)
            {
                box[i][j] = stg[i][j];
            }
        }
        x = 1;
        y = 8;
        s=0;
        k=10;
        l=11;
        o=16;
        p=6;
        q=23;
        r=7;

    }
    if(z==2)
    {
        int stg[32][17]= {2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                          2,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,2,
                          2,0,1,1,1,0,1,1,0,0,1,1,0,0,0,1,2,
                          2,0,1,1,1,0,0,0,0,0,0,0,0,1,1,0,2,
                          2,0,1,0,1,1,0,1,0,1,0,0,0,1,0,0,2,
                          2,0,1,0,1,0,0,0,1,1,0,1,1,1,0,1,2,
                          2,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,2,
                          2,1,0,0,1,1,1,1,1,1,0,0,0,0,1,1,2,
                          2,1,0,0,0,0,0,0,1,1,1,1,1,0,0,1,2,
                          2,1,1,1,0,0,0,0,1,0,0,0,0,1,0,1,2,
                          2,0,0,0,0,1,1,1,1,0,0,0,0,1,0,1,2,
                          2,0,0,0,1,1,0,0,1,1,1,0,0,0,0,1,2,
                          2,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,2,
                          2,0,1,1,1,1,1,1,0,0,1,1,0,0,0,0,2,
                          2,0,1,1,1,0,1,1,0,1,0,0,0,1,1,1,2,
                          2,1,0,0,0,1,0,0,0,1,1,1,1,1,1,1,2,
                          2,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,2,
                          2,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,
                          2,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,2,
                          2,1,0,0,1,1,1,0,1,1,0,1,0,0,1,0,2,
                          2,1,0,0,0,1,0,1,1,0,0,1,1,0,1,0,2,
                          2,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,
                          2,0,0,0,1,1,1,1,1,1,1,1,0,0,1,0,2,
                          2,1,1,1,1,0,0,0,0,1,0,0,0,1,0,0,2,
                          2,0,0,0,1,0,1,0,0,1,0,0,1,0,0,0,2,
                          2,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,2,
                          2,0,1,0,0,0,0,0,1,1,1,0,0,1,0,0,2,
                          2,1,0,1,1,1,0,0,0,0,0,0,0,0,1,1,2,
                          2,0,0,0,0,0,1,1,1,0,1,1,1,1,0,0,2,
                          2,0,1,1,0,1,0,0,0,0,1,0,0,0,0,1,2,
                          2,1,0,0,0,1,3,1,1,1,1,0,0,0,0,1,2,
                          2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
                         };
        for(i=0; i<32; i++)
        {
            for(j=0; j<17; j++)
            {
                box[i][j] = stg[i][j];
            }
        }
        x = 1;
        y = 14;
        s=0;
        k=10;
        l=11;
        o=17;
        p=7;
        q=23;
        r=7;
    }
    if(z==3)
    {
        int stg[32][17]= {2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                          2,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,
                          2,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,2,
                          2,1,1,0,1,0,1,1,0,1,1,0,0,1,1,0,2,
                          2,1,3,0,1,0,1,0,0,0,0,1,0,0,0,1,2,
                          2,0,1,1,0,0,1,1,0,1,1,0,0,0,1,0,2,
                          2,0,0,0,1,1,1,0,0,1,0,0,0,1,1,0,2,
                          2,1,1,0,1,0,0,0,1,1,0,1,1,0,0,0,2,
                          2,0,1,0,1,1,1,0,0,0,0,0,0,1,0,1,2,
                          2,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,2,
                          2,1,0,1,0,1,0,1,1,0,0,0,1,1,1,1,2,
                          2,0,0,0,1,0,0,0,0,1,1,0,0,1,0,0,2,
                          2,1,1,0,1,1,0,1,0,0,1,0,0,0,0,1,2,
                          2,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,2,
                          2,0,0,1,0,0,1,0,0,0,1,1,0,0,0,1,2,
                          2,1,1,1,0,1,1,1,0,1,0,0,0,1,1,0,2,
                          2,1,0,0,0,0,0,1,0,1,0,1,1,0,0,0,2,
                          2,1,1,0,0,1,0,0,0,0,0,0,0,0,1,0,2,
                          2,1,1,0,1,0,0,1,1,1,0,1,0,1,1,1,2,
                          2,0,0,0,0,0,1,1,0,1,1,1,0,0,0,0,2,
                          2,0,1,0,1,1,0,0,0,0,1,1,0,1,1,0,2,
                          2,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,2,
                          2,0,1,1,0,0,1,1,0,1,0,1,0,1,0,0,2,
                          2,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,2,
                          2,1,0,1,1,0,1,1,0,1,1,1,0,0,0,0,2,
                          2,1,0,1,0,0,0,1,0,0,0,0,1,0,1,0,2,
                          2,0,0,0,0,1,1,1,0,1,1,0,1,1,1,0,2,
                          2,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,2,
                          2,1,1,0,0,0,1,1,0,1,1,1,1,0,1,1,2,
                          2,1,0,1,0,0,1,0,0,0,0,1,0,0,1,0,2,
                          2,0,0,0,0,1,1,0,1,1,0,1,1,0,0,0,2,
                          2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
                         };
        for(i=0; i<32; i++)
        {
            for(j=0; j<17; j++)
            {
                box[i][j] = stg[i][j];
            }
        }
        x = 30;
        y = 1;
        s=0;
        k=2;
        l=8;
        o=17;
        p=6;
        q=23;
        r=6;
    }
    if(z==4)
    {
        int stg[32][17]= {2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                          2,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,2,
                          2,0,1,1,1,0,1,1,0,0,1,0,0,0,0,0,2,
                          2,0,1,1,1,0,0,0,0,0,0,0,0,1,1,0,2,
                          2,0,1,0,1,1,0,1,0,1,0,0,0,1,0,0,2,
                          2,0,1,0,1,1,0,1,0,1,0,0,0,1,0,0,2,
                          2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
                          2,1,0,0,1,1,1,1,1,1,0,1,0,1,0,1,2,
                          2,1,0,0,0,0,0,0,1,1,1,0,0,0,0,1,2,
                          2,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,2,
                          2,0,1,0,0,0,1,0,0,0,0,0,0,1,0,1,2,
                          2,0,1,0,1,1,1,0,1,1,1,0,1,0,0,1,2,
                          2,0,1,0,0,0,1,0,1,0,0,0,1,0,1,1,2,
                          2,0,1,0,0,0,1,0,1,0,1,1,0,0,0,0,2,
                          2,0,1,0,0,0,1,0,0,1,0,0,1,1,1,1,2,
                          2,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,2,
                          2,1,0,0,1,0,0,0,0,1,1,1,1,1,0,0,2,
                          2,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,2,
                          2,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,2,
                          2,1,0,0,1,0,1,0,1,1,0,0,0,0,1,0,2,
                          2,1,0,1,0,1,0,1,1,0,1,1,1,0,1,0,2,
                          2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,2,
                          2,1,0,1,0,0,0,0,0,1,1,1,0,0,1,0,2,
                          2,1,1,1,0,0,0,0,0,1,0,0,0,1,0,0,2,
                          2,0,0,0,0,1,1,1,0,1,0,0,1,0,1,0,2,
                          2,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,2,
                          2,0,1,0,0,1,1,1,1,1,1,0,0,1,0,0,2,
                          2,1,0,0,1,1,0,0,0,0,1,0,0,1,0,1,2,
                          2,0,0,0,0,1,1,1,1,0,1,1,1,1,0,0,2,
                          2,1,1,1,0,1,1,1,1,0,1,0,0,0,0,1,2,
                          2,1,3,0,0,1,0,1,1,0,1,0,0,0,0,1,2,
                          2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
                         };
        for(i=0; i<32; i++)
        {
            for(j=0; j<17; j++)
            {
                box[i][j] = stg[i][j];
            }
        }
        x = 1;
        y = 15;
        s=0;
        k=12;
        l=3;
        o=17;
        p=6;
        q=23;
        r=6;
    }
    if(z==5)
    {
        int stg[32][17]= {2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                          2,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,2,
                          2,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,2,
                          2,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,2,
                          2,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,2,
                          2,0,1,1,0,1,1,0,1,0,1,1,1,0,1,0,2,
                          2,1,0,0,0,0,0,0,1,0,0,1,0,1,1,0,2,
                          2,1,0,1,1,1,1,0,1,0,1,0,0,0,0,0,2,
                          2,1,0,1,1,1,1,1,1,0,1,0,1,0,1,0,2,
                          2,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,2,
                          2,0,1,0,1,0,1,1,1,1,1,0,0,1,1,0,2,
                          2,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,2,
                          2,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,2,
                          2,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,2,
                          2,0,1,0,1,0,1,0,1,1,1,1,0,1,0,1,2,
                          2,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,2,
                          2,0,1,0,1,1,0,1,1,1,0,0,0,0,0,1,2,
                          2,0,1,0,0,0,0,0,1,1,1,0,1,1,0,1,2,
                          2,0,1,1,1,1,1,0,1,0,0,1,1,1,0,0,2,
                          2,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,2,
                          2,1,0,1,1,0,0,1,0,1,0,1,0,0,1,0,2,
                          2,1,0,0,1,0,0,0,0,1,0,1,0,0,1,0,2,
                          2,1,1,0,0,1,1,0,0,0,0,0,1,0,1,0,2,
                          2,3,0,1,0,0,1,0,1,1,1,1,1,0,1,0,2,
                          2,1,0,1,1,0,1,0,1,0,0,0,0,0,1,0,2,
                          2,1,0,1,0,1,1,1,1,0,1,1,1,1,1,0,2,
                          2,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,2,
                          2,1,0,1,0,0,0,0,0,0,1,0,1,1,1,1,2,
                          2,1,0,0,0,0,1,0,1,0,1,0,1,1,1,1,2,
                          2,0,1,1,1,1,1,1,0,0,1,0,0,1,1,1,2,
                          2,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,2,
                          2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
                         };
        for(i=0; i<32; i++)
        {
            for(j=0; j<17; j++)
            {
                box[i][j] = stg[i][j];
            }
        }
        x = 1;
        y = 3;
        s=0;
        k=9;
        l=2;
        o=14;
        p=14;
        q=27;
        r=5;

    }
}
void MakeStage()
{
    int i,j,a;
    for(i=0; i<32; i++)
    {
        for(j=0; j<17; j++)
        {
            if(box[i][j]==2)
                printf("%c",219);
            if(box[i][j]==1)
                printf("%c",178);
            if(box[i][j]==0)
                printf(" ");
            if(box[i][j]==3)
                printf("8");
        }
        printf("\n");
    }
}
void PlayGame()
{
    int i,j,a,STAGE;
    char c;
    srand(time(NULL));
    STAGE = rand()%6;
    stage(STAGE);
    MakeStage();
    gotoxy(k,l);
    printf("*");
    gotoxy(o,p);
    printf("*");
    gotoxy(q,r);
    printf("*");
    gotoxy(x,y);
    printf("0");
    while(1)
    {
        c = getch();
        if(c=='s'||c=='S')
        {
            if(box[x+1][y] == 0 )
            {
                x++;
                gotoxy(x,y);
                printf("0");
                gotoxy(x-1,y);
                printf(" ");
                gotoxy(x,y);
                s++;
                system("COLOR 0D");
                Enemy1();
                Enemy2();
                Enemy3();
                checklose(x,y);

            }
            if(box[x+1][y] == 3 )
            {
                s++;
                system("cls");
                Winscr();
            }
        }
        if(c=='w'||c=='W')
        {
            if(box[x-1][y] == 0 )
            {
                x--;
                gotoxy(x,y);
                printf("0");
                gotoxy(x+1,y);
                printf(" ");
                gotoxy(x,y);
                s++;
                system("COLOR 0C");
                Enemy1();
                Enemy2();
                Enemy3();
                checklose(x,y);

            }
            if(box[x-1][y] == 3 )
            {
                s++;
                system("cls");
                Winscr();
            }

        }
        if(c=='d'||c=='D')
        {
            if(box[x][y+1] == 0 )
            {
                y++;
                gotoxy(x,y);
                printf("0");
                gotoxy(x,y-1);
                printf(" ");
                gotoxy(x,y);
                s++;
                system("COLOR 0E");
                Enemy1();
                Enemy2();
                Enemy3();
                checklose(x,y);

            }
            if(box[x][y+1] == 3 )
            {
                s++;
                system("cls");
                Winscr();
            }
        }

        if(c=='a'||c=='A')
        {
            if(box[x][y-1] == 0 )
            {
                y--;
                gotoxy(x,y);
                printf("0");
                gotoxy(x,y+1);
                printf(" ");
                gotoxy(x,y);
                s++;
                system("COLOR 0A");
                Enemy1();
                Enemy2();
                Enemy3();
                checklose(x,y);
            }
            if(box[x][y-1] == 3 )
            {
                s++;
                system("cls");
                Winscr();
            }

        }
    }

}
void Menu()
{
    char l,y;
    textcolor(10,0);
    printf("\n\n\n      %c %c %c%c%c %c %c %c  %c%c%c %c%c%c  %c%c%c %c   %c%c%c %c %c\n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("      %c%c%c %c%c%c %c %c %c   %c  %c%c%c  %c%c%c %c   %c%c%c %c%c%c\n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("      %c %c %c%c%c %c%c%c%c%c   %c  %c%c%c  %c   %c%c%c %c %c  %c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    textcolor(9,0);
    printf("\n #                                              #");
    printf("\n #                                              #");
    printf("\n #      tap a ------------------- left          #");
    printf("\n #      tap s ------------------- down          #");
    printf("\n #      tap w ------------------- up            #");
    printf("\n #      tap d ------------------- right         #");
    printf("\n #                                              #");
    printf("\n #                                              #");
    printf("\n #      tap p ------------------- Play          #");
    printf("\n #      tap h ------------------- High Score    #");
    printf("\n #      tap c ------------------- Change User   #");
    printf("\n #                                              #");
    printf("\n #                                              #\n");
    textcolor(12,0);
    printf("\t\t   User: %s",name);
    while(1)
    {
        fflush(stdin);
        l = getch();
        if(l=='p'||l=='h'||l=='c');
        {
            if(l=='p')
            {
                system("cls");
                PlayGame();
            }
            if(l=='h')
            {
                system("cls");
                Highscr();
            }
            if(l=='c')
            {
                system("cls");
                main();
            }
        }
    }
}
void Highscr()
{
    char name[100][100];
    int point[100];
    int tempnum;
    char temp;
    char tempsen[100];
    int i=-1,j,k;
    textcolor(13,0);
    printf("\n\n                       %c %c %c%c%c %c%c%c %c %c    %c%c%c %c%c%c %c%c%c %c%c%c  %c%c%c \n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("                       %c%c%c  %c  %c   %c%c%c    %c   %c   %c%c%c %c%c%c  %c%c\n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("                       %c %c %c%c%c %c%c%c %c %c  %c%c%c   %c%c%c %c%c%c %c  %c %c%c%c\n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("                                 %c\n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    textcolor(11,0);
    printf("                      UserName                         Score             \n");
    FILE *pt,*tp;
    pt = fopen("User.txt","r");
    tp = fopen("Score.txt","r");
    while(!feof(pt))
    {
        i++;
        fscanf(pt,"%s",name[i]);
        fscanf(tp,"%d",&point[i]);
    }
    for(j=0; j<i; j++)
    {
        for(k=j+1; k<i; k++)
        {
            if(point[j]>point[k])
            {
                tempnum = point[j];
                point[j] = point[k];
                point[k] = tempnum;
                strcpy(tempsen,name[j]);
                strcpy(name[j],name[k]);
                strcpy(name[k],tempsen);
            }
        }
    }
    for(j=0; j<i; j++)
    {
        printf("%30s%30d\n",name[j],point[j]);
    }
    fclose(pt);
    fclose(tp);
    printf("Press anykey to go to menu");
    temp = getch();
    fflush(stdin);
    system("cls");
}
void main()
{
    printf("\n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c  %c%c%c%c  %c     %c  %c%c%c%c     %c      %c        %c     %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c  %c  %c  %c  %c%c%c%c  %c%c%c%c  %c%c%c%c  %c%c  %c  %c  %c  %c  %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c  %c  %c  %c    %c%c  %c%c%c%c  %c%c%c%c  %c%c  %c  %c  %c  %c    %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c  %c  %c  %c  %c%c%c%c  %c%c%c%c  %c%c%c%c  %c%c  %c  %c  %c  %c  %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c        %c     %c     %c     %c      %c  %c%c%c%c  %c     %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c        %c      %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c  %c%c%c%c  %c%c  %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c  %c%c%c%c  %c%c  %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c  %c%c%c%c  %c%c  %c%c%c%c%c%c        %c  %c  %c     %c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c  %c%c%c%c      %c%c%c%c%c%c%c%c%c  %c%c%c%c  %c  %c  %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c  %c%c%c%c     %c    %c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c  %c%c%c%c  %c  %c  %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c  %c%c%c%c  %c  %c     %c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c               %c%c            %c%c             %c%c            %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c               %c%c            %c%c             %c%c            %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c    %c%c   %c%c    %c%c    %c%c%c%c    %c%c%c%c%c%c%c%c    %c%c%c%c%c    %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c    %c%c   %c%c    %c%c    %c%c%c%c    %c%c%c%c%c%c%c%c    %c%c%c%c%c        %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c    %c%c   %c%c    %c%c            %c%c%c%c%c    %c%c%c%c%c%c%c%c        %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c    %c%c   %c%c    %c%c            %c%c%c%c%c    %c%c%c%c%c%c%c%c    %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c    %c%c%c%c%c%c%c    %c%c    %c%c%c%c    %c%c%c            %c%c            %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c    %c%c%c%c%c%c%c    %c%c    %c%c%c%c    %c%c%c            %c%c            %c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("\n%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    printf("%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c\n",219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219);
    textcolor(15,0);
    printf("Enter Your Name :");
    scanf("%s",name);
    fflush(stdin);
    system("cls");
    Menu();
}
